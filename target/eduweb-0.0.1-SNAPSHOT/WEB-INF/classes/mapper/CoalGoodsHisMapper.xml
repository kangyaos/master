<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sxhalo.lmb.mapper.CoalGoodsHisMapper" >
  <resultMap id="BaseResultMap" type="com.sxhalo.lmb.domain.CoalGoodsHis" >
    <id column="goods_release_num" property="goodsReleaseNum" jdbcType="VARCHAR" />
    <result column="publish_time" property="publishTime" jdbcType="TIMESTAMP" />
    <result column="publish_user" property="publishUser" jdbcType="BIGINT" />
    <result column="goods_id" property="goodsId" jdbcType="VARCHAR" />
    <result column="coal_sales_id" property="coalSalesId" jdbcType="INTEGER" />
    <result column="mine_mouth_id" property="mineMouthId" jdbcType="INTEGER" />
    <result column="coal_category_id" property="coalCategoryId" jdbcType="VARCHAR" />
    <result column="coal_name" property="coalName" jdbcType="VARCHAR" />
    <result column="coal_pic_code" property="coalPicCode" jdbcType="VARCHAR" />
    <result column="coal_pic" property="coalPic" jdbcType="VARCHAR" />
    <result column="consulting_fee" property="consultingFee" jdbcType="INTEGER" />
    <result column="quantity" property="quantity" jdbcType="DECIMAL" />
    <result column="quote" property="quote" jdbcType="DECIMAL" />
    <result column="one_quote" property="oneQuote" jdbcType="DECIMAL" />
    <result column="is_show_one" property="isShowOne" jdbcType="INTEGER" />
    <result column="two_quote" property="twoQuote" jdbcType="DECIMAL" />
    <result column="is_show_two" property="isShowTwo" jdbcType="INTEGER" />
    <result column="loading_expense" property="loadingExpense" jdbcType="DECIMAL" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="technology" property="technology" jdbcType="VARCHAR" />
    <result column="calorific_value" property="calorificValue" jdbcType="INTEGER" />
    <result column="total_moisture" property="totalMoisture" jdbcType="DECIMAL" />
    <result column="total_sulfur" property="totalSulfur" jdbcType="DECIMAL" />
    <result column="volatile_value" property="volatileValue" jdbcType="DECIMAL" />
    <result column="fixed_carbon" property="fixedCarbon" jdbcType="DECIMAL" />
    <result column="grain_size" property="grainSize" jdbcType="VARCHAR" />
    <result column="ash_value" property="ashValue" jdbcType="DECIMAL" />
    <result column="coal_report_pic_code" property="coalReportPicCode" jdbcType="VARCHAR" />
    <result column="coal_report_pic" property="coalReportPic" jdbcType="VARCHAR" />
    <result column="coal_report_institution" property="coalReportInstitution" jdbcType="VARCHAR" />
    <result column="coal_report_time" property="coalReportTime" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="data_source" property="dataSource" jdbcType="INTEGER" />
    <association property="coalGoods" column="goods_id" select="com.sxhalo.lmb.mapper.CoalGoodsMapper.selectByPrimaryKey"/>
  </resultMap>
  <sql id="Base_Column_List" >
    goods_release_num, publish_time, publish_user, goods_id, coal_sales_id, mine_mouth_id, 
    coal_category_id, coal_name, coal_pic_code, coal_pic, consulting_fee, quantity, quote, 
    one_quote, is_show_one, two_quote, is_show_two, loading_expense, description, technology, 
    calorific_value, total_moisture, total_sulfur, volatile_value, fixed_carbon, grain_size, 
    ash_value, coal_report_pic_code, coal_report_pic, coal_report_institution, coal_report_time, 
    remark, data_source
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from coal_goods_his
    where goods_release_num = #{goodsReleaseNum,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from coal_goods_his
    where goods_release_num = #{goodsReleaseNum,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.sxhalo.lmb.domain.CoalGoodsHis" >
    insert into coal_goods_his (goods_release_num, publish_time, publish_user, 
      goods_id, coal_sales_id, mine_mouth_id, 
      coal_category_id, coal_name, coal_pic_code, 
      coal_pic, consulting_fee, quantity, 
      quote, one_quote, is_show_one, 
      two_quote, is_show_two, loading_expense, 
      description, technology, calorific_value, 
      total_moisture, total_sulfur, volatile_value, 
      fixed_carbon, grain_size, ash_value, 
      coal_report_pic_code, coal_report_pic, coal_report_institution, 
      coal_report_time, remark, data_source
      )
    values (#{goodsReleaseNum,jdbcType=VARCHAR}, #{publishTime,jdbcType=TIMESTAMP}, #{publishUser,jdbcType=BIGINT}, 
      #{goodsId,jdbcType=VARCHAR}, #{coalSalesId,jdbcType=INTEGER}, #{mineMouthId,jdbcType=INTEGER}, 
      #{coalCategoryId,jdbcType=VARCHAR}, #{coalName,jdbcType=VARCHAR}, #{coalPicCode,jdbcType=VARCHAR}, 
      #{coalPic,jdbcType=VARCHAR}, #{consultingFee,jdbcType=INTEGER}, #{quantity,jdbcType=DECIMAL}, 
      #{quote,jdbcType=DECIMAL}, #{oneQuote,jdbcType=DECIMAL}, #{isShowOne,jdbcType=INTEGER}, 
      #{twoQuote,jdbcType=DECIMAL}, #{isShowTwo,jdbcType=INTEGER}, #{loadingExpense,jdbcType=DECIMAL}, 
      #{description,jdbcType=VARCHAR}, #{technology,jdbcType=VARCHAR}, #{calorificValue,jdbcType=INTEGER}, 
      #{totalMoisture,jdbcType=DECIMAL}, #{totalSulfur,jdbcType=DECIMAL}, #{volatileValue,jdbcType=DECIMAL}, 
      #{fixedCarbon,jdbcType=DECIMAL}, #{grainSize,jdbcType=VARCHAR}, #{ashValue,jdbcType=DECIMAL}, 
      #{coalReportPicCode,jdbcType=VARCHAR}, #{coalReportPic,jdbcType=VARCHAR}, #{coalReportInstitution,jdbcType=VARCHAR}, 
      #{coalReportTime,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR}, #{dataSource,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.sxhalo.lmb.domain.CoalGoodsHis" >
    insert into coal_goods_his
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="goodsReleaseNum != null" >
        goods_release_num,
      </if>
      <if test="publishTime != null" >
        publish_time,
      </if>
      <if test="publishUser != null" >
        publish_user,
      </if>
      <if test="goodsId != null" >
        goods_id,
      </if>
      <if test="coalSalesId != null" >
        coal_sales_id,
      </if>
      <if test="mineMouthId != null" >
        mine_mouth_id,
      </if>
      <if test="coalCategoryId != null" >
        coal_category_id,
      </if>
      <if test="coalName != null" >
        coal_name,
      </if>
      <if test="coalPicCode != null" >
        coal_pic_code,
      </if>
      <if test="coalPic != null" >
        coal_pic,
      </if>
      <if test="consultingFee != null" >
        consulting_fee,
      </if>
      <if test="quantity != null" >
        quantity,
      </if>
      <if test="quote != null" >
        quote,
      </if>
      <if test="oneQuote != null" >
        one_quote,
      </if>
      <if test="isShowOne != null" >
        is_show_one,
      </if>
      <if test="twoQuote != null" >
        two_quote,
      </if>
      <if test="isShowTwo != null" >
        is_show_two,
      </if>
      <if test="loadingExpense != null" >
        loading_expense,
      </if>
      <if test="description != null" >
        description,
      </if>
      <if test="technology != null" >
        technology,
      </if>
      <if test="calorificValue != null" >
        calorific_value,
      </if>
      <if test="totalMoisture != null" >
        total_moisture,
      </if>
      <if test="totalSulfur != null" >
        total_sulfur,
      </if>
      <if test="volatileValue != null" >
        volatile_value,
      </if>
      <if test="fixedCarbon != null" >
        fixed_carbon,
      </if>
      <if test="grainSize != null" >
        grain_size,
      </if>
      <if test="ashValue != null" >
        ash_value,
      </if>
      <if test="coalReportPicCode != null" >
        coal_report_pic_code,
      </if>
      <if test="coalReportPic != null" >
        coal_report_pic,
      </if>
      <if test="coalReportInstitution != null" >
        coal_report_institution,
      </if>
      <if test="coalReportTime != null" >
        coal_report_time,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="dataSource != null" >
        data_source,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="goodsReleaseNum != null" >
        #{goodsReleaseNum,jdbcType=VARCHAR},
      </if>
      <if test="publishTime != null" >
        #{publishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="publishUser != null" >
        #{publishUser,jdbcType=BIGINT},
      </if>
      <if test="goodsId != null" >
        #{goodsId,jdbcType=VARCHAR},
      </if>
      <if test="coalSalesId != null" >
        #{coalSalesId,jdbcType=INTEGER},
      </if>
      <if test="mineMouthId != null" >
        #{mineMouthId,jdbcType=INTEGER},
      </if>
      <if test="coalCategoryId != null" >
        #{coalCategoryId,jdbcType=VARCHAR},
      </if>
      <if test="coalName != null" >
        #{coalName,jdbcType=VARCHAR},
      </if>
      <if test="coalPicCode != null" >
        #{coalPicCode,jdbcType=VARCHAR},
      </if>
      <if test="coalPic != null" >
        #{coalPic,jdbcType=VARCHAR},
      </if>
      <if test="consultingFee != null" >
        #{consultingFee,jdbcType=INTEGER},
      </if>
      <if test="quantity != null" >
        #{quantity,jdbcType=DECIMAL},
      </if>
      <if test="quote != null" >
        #{quote,jdbcType=DECIMAL},
      </if>
      <if test="oneQuote != null" >
        #{oneQuote,jdbcType=DECIMAL},
      </if>
      <if test="isShowOne != null" >
        #{isShowOne,jdbcType=INTEGER},
      </if>
      <if test="twoQuote != null" >
        #{twoQuote,jdbcType=DECIMAL},
      </if>
      <if test="isShowTwo != null" >
        #{isShowTwo,jdbcType=INTEGER},
      </if>
      <if test="loadingExpense != null" >
        #{loadingExpense,jdbcType=DECIMAL},
      </if>
      <if test="description != null" >
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="technology != null" >
        #{technology,jdbcType=VARCHAR},
      </if>
      <if test="calorificValue != null" >
        #{calorificValue,jdbcType=INTEGER},
      </if>
      <if test="totalMoisture != null" >
        #{totalMoisture,jdbcType=DECIMAL},
      </if>
      <if test="totalSulfur != null" >
        #{totalSulfur,jdbcType=DECIMAL},
      </if>
      <if test="volatileValue != null" >
        #{volatileValue,jdbcType=DECIMAL},
      </if>
      <if test="fixedCarbon != null" >
        #{fixedCarbon,jdbcType=DECIMAL},
      </if>
      <if test="grainSize != null" >
        #{grainSize,jdbcType=VARCHAR},
      </if>
      <if test="ashValue != null" >
        #{ashValue,jdbcType=DECIMAL},
      </if>
      <if test="coalReportPicCode != null" >
        #{coalReportPicCode,jdbcType=VARCHAR},
      </if>
      <if test="coalReportPic != null" >
        #{coalReportPic,jdbcType=VARCHAR},
      </if>
      <if test="coalReportInstitution != null" >
        #{coalReportInstitution,jdbcType=VARCHAR},
      </if>
      <if test="coalReportTime != null" >
        #{coalReportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        #{dataSource,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.sxhalo.lmb.domain.CoalGoodsHis" >
    update coal_goods_his
    <set >
      <if test="publishTime != null" >
        publish_time = #{publishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="publishUser != null" >
        publish_user = #{publishUser,jdbcType=BIGINT},
      </if>
      <if test="goodsId != null" >
        goods_id = #{goodsId,jdbcType=VARCHAR},
      </if>
      <if test="coalSalesId != null" >
        coal_sales_id = #{coalSalesId,jdbcType=INTEGER},
      </if>
      <if test="mineMouthId != null" >
        mine_mouth_id = #{mineMouthId,jdbcType=INTEGER},
      </if>
      <if test="coalCategoryId != null" >
        coal_category_id = #{coalCategoryId,jdbcType=VARCHAR},
      </if>
      <if test="coalName != null" >
        coal_name = #{coalName,jdbcType=VARCHAR},
      </if>
      <if test="coalPicCode != null" >
        coal_pic_code = #{coalPicCode,jdbcType=VARCHAR},
      </if>
      <if test="coalPic != null" >
        coal_pic = #{coalPic,jdbcType=VARCHAR},
      </if>
      <if test="consultingFee != null" >
        consulting_fee = #{consultingFee,jdbcType=INTEGER},
      </if>
      <if test="quantity != null" >
        quantity = #{quantity,jdbcType=DECIMAL},
      </if>
      <if test="quote != null" >
        quote = #{quote,jdbcType=DECIMAL},
      </if>
      <if test="oneQuote != null" >
        one_quote = #{oneQuote,jdbcType=DECIMAL},
      </if>
      <if test="isShowOne != null" >
        is_show_one = #{isShowOne,jdbcType=INTEGER},
      </if>
      <if test="twoQuote != null" >
        two_quote = #{twoQuote,jdbcType=DECIMAL},
      </if>
      <if test="isShowTwo != null" >
        is_show_two = #{isShowTwo,jdbcType=INTEGER},
      </if>
      <if test="loadingExpense != null" >
        loading_expense = #{loadingExpense,jdbcType=DECIMAL},
      </if>
      <if test="description != null" >
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="technology != null" >
        technology = #{technology,jdbcType=VARCHAR},
      </if>
      <if test="calorificValue != null" >
        calorific_value = #{calorificValue,jdbcType=INTEGER},
      </if>
      <if test="totalMoisture != null" >
        total_moisture = #{totalMoisture,jdbcType=DECIMAL},
      </if>
      <if test="totalSulfur != null" >
        total_sulfur = #{totalSulfur,jdbcType=DECIMAL},
      </if>
      <if test="volatileValue != null" >
        volatile_value = #{volatileValue,jdbcType=DECIMAL},
      </if>
      <if test="fixedCarbon != null" >
        fixed_carbon = #{fixedCarbon,jdbcType=DECIMAL},
      </if>
      <if test="grainSize != null" >
        grain_size = #{grainSize,jdbcType=VARCHAR},
      </if>
      <if test="ashValue != null" >
        ash_value = #{ashValue,jdbcType=DECIMAL},
      </if>
      <if test="coalReportPicCode != null" >
        coal_report_pic_code = #{coalReportPicCode,jdbcType=VARCHAR},
      </if>
      <if test="coalReportPic != null" >
        coal_report_pic = #{coalReportPic,jdbcType=VARCHAR},
      </if>
      <if test="coalReportInstitution != null" >
        coal_report_institution = #{coalReportInstitution,jdbcType=VARCHAR},
      </if>
      <if test="coalReportTime != null" >
        coal_report_time = #{coalReportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        data_source = #{dataSource,jdbcType=INTEGER},
      </if>
    </set>
    where goods_release_num = #{goodsReleaseNum,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.sxhalo.lmb.domain.CoalGoodsHis" >
    update coal_goods_his
    set publish_time = #{publishTime,jdbcType=TIMESTAMP},
      publish_user = #{publishUser,jdbcType=BIGINT},
      goods_id = #{goodsId,jdbcType=VARCHAR},
      coal_sales_id = #{coalSalesId,jdbcType=INTEGER},
      mine_mouth_id = #{mineMouthId,jdbcType=INTEGER},
      coal_category_id = #{coalCategoryId,jdbcType=VARCHAR},
      coal_name = #{coalName,jdbcType=VARCHAR},
      coal_pic_code = #{coalPicCode,jdbcType=VARCHAR},
      coal_pic = #{coalPic,jdbcType=VARCHAR},
      consulting_fee = #{consultingFee,jdbcType=INTEGER},
      quantity = #{quantity,jdbcType=DECIMAL},
      quote = #{quote,jdbcType=DECIMAL},
      one_quote = #{oneQuote,jdbcType=DECIMAL},
      is_show_one = #{isShowOne,jdbcType=INTEGER},
      two_quote = #{twoQuote,jdbcType=DECIMAL},
      is_show_two = #{isShowTwo,jdbcType=INTEGER},
      loading_expense = #{loadingExpense,jdbcType=DECIMAL},
      description = #{description,jdbcType=VARCHAR},
      technology = #{technology,jdbcType=VARCHAR},
      calorific_value = #{calorificValue,jdbcType=INTEGER},
      total_moisture = #{totalMoisture,jdbcType=DECIMAL},
      total_sulfur = #{totalSulfur,jdbcType=DECIMAL},
      volatile_value = #{volatileValue,jdbcType=DECIMAL},
      fixed_carbon = #{fixedCarbon,jdbcType=DECIMAL},
      grain_size = #{grainSize,jdbcType=VARCHAR},
      ash_value = #{ashValue,jdbcType=DECIMAL},
      coal_report_pic_code = #{coalReportPicCode,jdbcType=VARCHAR},
      coal_report_pic = #{coalReportPic,jdbcType=VARCHAR},
      coal_report_institution = #{coalReportInstitution,jdbcType=VARCHAR},
      coal_report_time = #{coalReportTime,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      data_source = #{dataSource,jdbcType=INTEGER}
    where goods_release_num = #{goodsReleaseNum,jdbcType=VARCHAR}
  </update>
  
  <select id="getCount" resultType="java.lang.Integer">
    select count(*) from coal_goods_his
    <if test="where != null and where != ''" >
      where ${where}
    </if>      
  </select>
  <select id="getChartData" resultType="java.util.HashMap">
	SELECT  DATE_FORMAT(ptime,'%Y-%m-%d') ptime,d.one_quote
	FROM(select max(publish_time) ptime from coal_goods_his a where goods_release_num like  "${goodsId}%"   GROUP BY DATE_FORMAT(publish_time,'%Y-%m-%d')) t
	INNER JOIN coal_goods_his d on d.publish_time =t.ptime  and  d.publish_time >= '${day}' and  goods_release_num like "${goodsId}%"
  </select>
  <select id="findWhereList" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from coal_goods_his
    <if test="where != null and where != ''" >
      where ${where}
    </if> 
    <if test="order != null and order != ''" >
      order by ${order}
    </if>     
  </select>
  <select id="findPagerList" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from coal_goods_his
    <if test="where != null and where != ''" >
      where ${where}
    </if> 
    <if test="order != null and order != ''" >
      order by ${order}
    </if>
    <if test="length != null and length != -1" >
      limit ${start},${length}
    </if>
  </select>
</mapper>