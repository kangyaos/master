<!DOCTYPE html>
<html lang="zh-CN">
<!-- BEGIN HEAD -->
<head>
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="" />
<meta name="author" content="" />
<title>货运详情</title>
<!-- 微信 JS-SDK -->
<script src="//res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
<script type="text/javascript">

	wx.config({
		appId : '${appId!}', // 必填，公众号的唯一标识
		timestamp : '${timeStamp!}', // 必填，生成签名的时间戳
		nonceStr : '${nonceStr!}', // 必填，生成签名的随机串
		signature : '${signature!}', // 必填，签名 
		jsApiList : ['onMenuShareAppMessage','onMenuShareTimeline', 'onMenuShareQQ', 'onMenuShareQZone']
	});

	wx.ready(function() {

		// 分享给朋友
		wx.onMenuShareAppMessage({
			title : '${fromPlace!}到${toPlace!}', // 分享标题
			desc : '${fromPlace!}到${toPlace!}，货物：${trans.goodsName!}，运费${trans.cost!"电话详谈"}${trans.costUnit!}', // 分享描述
			link : '${url!}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
			imgUrl : 'http://www.17lm.com/assets/image/44.png', // 分享图标
			success : function() {
				// 用户确认分享后执行的回调函数
			},
			cancel : function() {
				// 用户取消分享后执行的回调函数
			}
		});
		
		// 分享到朋友圈
		wx.onMenuShareTimeline({
			title : '${fromPlace!}到${toPlace!}', // 分享标题
			link : '${url!}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
			imgUrl : 'http://www.17lm.com/assets/image/44.png', // 分享图标
			success : function() {
				// 用户确认分享后执行的回调函数
			},
			cancel : function() {
				// 用户取消分享后执行的回调函数
			}
		});

		// 分享到QQ
		wx.onMenuShareQQ({
			title : '${fromPlace!}到${toPlace!}', // 分享标题
			desc : '${fromPlace!}到${toPlace!}，货物：${trans.goodsName!}，运费${trans.cost!}${trans.costUnit!}', // 分享描述
			link : '${url!}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
			imgUrl : 'http://www.17lm.com/assets/image/44.png', // 分享图标
			success : function() {
				// 用户确认分享后执行的回调函数
			},
			cancel : function() {
				// 用户取消分享后执行的回调函数
			}
		});

		// 分享到QQ空间
		wx.onMenuShareQZone({
			title : '${fromPlace!}到${toPlace!}', // 分享标题
			desc : '${fromPlace!}到${toPlace!}，货物：${trans.goodsName!}，运费${trans.cost!}${trans.costUnit!}', // 分享描述
			link : '${url!}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
			imgUrl : 'http://www.17lm.com/assets/image/44.png', // 分享图标
			success : function() {
				// 用户确认分享后执行的回调函数
			},
			cancel : function() {
				// 用户取消分享后执行的回调函数
			}
		});

	});

	wx.error(function(res) {
		// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
		console.log('weixin 验证失败');
		console.log(res);
	});
</script>
<link rel="stylesheet" href="${base}/assets/bootstrap/css/bootstrap.min.css"/>
<style type="text/css">
	.bord{
		margin:10px 10px;
	}
	.inline{
		color:red;float: right;margin-right: 20px;
	}
	.gridtable {
		 width:100%; 
		 margin-top: 15px;
		 margin-bottom: 15px;
	}
	.gridtable td{
		width:60px;
		height:28px;
		text-align: center;
		color:#9d9d9d;font-size:14px;
	}
	hr{
		margin-top: 0px;
		margin-bottom: 0px;
	}
	#address img{
		height: 20px;
		float: left;
	}
	.bottom{
		margin:10px 10px;
	}
	.bottom li{
		color:#9d9d9d;font-size:14px;
	}
	
</style>
<!-- 星星 -->
<style>

/*星星样式*/
.content{ width:600px; margin:0 auto; padding-top:20px;}
.title{ font-size:14px; background:#dfdfdf; padding:10px; margin-bottom:10px;}
.block{ width:100%; margin:0 0 20px 0; padding-top:10px; padding-left:50px; line-height:21px;}
.block .star_score{ float:left;}
.star_list{height:21px;margin:50px; line-height:21px;}
.block p,.block .attitude{ padding-left:20px; line-height:21px; display:inline-block;}
.block p span{ color:#C00; font-size:16px; font-family:Georgia, "Times New Roman", Times, serif;}
.star_score { background:url(${base}/upload/stark2.png); width:120px; height:16px;  position:relative; }
.star_score a{ height:16px; display:block; text-indent:-999em; position:absolute;left:0;}
.star_score a:hover{ background:url(${base}/assets/image/stars2.png);left:0;}
.star_score a.clibg{ background:url(${base}/assets/image/stars2.png);left:0;}
#starttwo .star_score { background:url(${base}/assets/image/starky1.jpg);}
#starttwo .star_score a:hover{ background:url(${base}/assets/image/starsy1.jpg);left:0;}
#starttwo .star_score a.clibg{ background:url(${base}/assets/image/starsy1.jpg);left:0;}
</style>
<!-- 星星 end -->
</head>
<body>
	<div class="bord">
		<div id="address">
			<img src="${base}/assets/image/transbegin.png"><p>&nbsp;&nbsp;${trans.startAddress!}</p>
			<img src="${base}/assets/image/transend.png"><p>&nbsp;&nbsp;${trans.endAddress!}</p>
		</div>
		
	</div>
	<div style="height:1px;border:none;border-top:10px solid #eee;"/>
	<div class="bord">
		<div style="display:inline;">货物:${trans.goodsName!}</div>&nbsp;&nbsp;&nbsp;&nbsp;<div class="inline" style="display:inline;">${trans.cost!'运费电话详谈'}${trans.costUnit!}</div>
		
		<table class="gridtable">
			<tr>
				<#if trans.informationCharge??><td style="border-right: solid 1px #eee;border-top:solid 1px #eee;color:#1e7aea">${trans.informationCharge!}元</td><#else><td style="border-right: solid 1px #eee;border-top:solid 1px #eee;">--</td></#if>
				<#if trans.loadingCharge??><td style="border-right: solid 1px #eee;border-top:solid 1px #eee; color:#1e7aea">${trans.loadingCharge!}元</td><#else><td style="border-right: solid 1px #eee;border-top:solid 1px #eee;">--</td></#if>
				<#if trans.unloadingCharge??><td style="border-top:solid 1px #eee;color:#1e7aea">${trans.unloadingCharge!}元</td><#else><td style="border-top:solid 1px #eee;">--</td></#if>
			</tr>
			<tr>
				<td style="border-right: solid 1px #eee;border-bottom:solid 1px #eee;">信息费</td>
				<td style="border-right: solid 1px #eee;border-bottom:solid 1px #eee;">装车费</td>
				<td style="border-bottom:solid 1px #eee;">卸车费</td>
			</tr>
		</table>
		<div>还需${trans.needNum!}车</div>
	</div>
	<div style="height:1px;border:none;border-top:10px solid #eee;"/>
	<div class="bord">
		<#if trans.coalSalesId??>
		<div style="display:inline;" class="message">信息来源：${trans.companyName!}</div>
		<#else>
		<div style="display:inline;" class="message">信息来源：个人</div>
		</#if>
		<hr style="margin:10px 0px;">
		<div>
			<table>
				<tbody>
					<tr>
						<td>信用等级:<div id="starttwo" style="float:right;margin-right: 120px;">
		        			<div  class="star_score"></div>
					    </td>
						<td rowspan="2"><a href="tel:${userMobile!}">
						<img src="${base}/assets/image/phone1.png" style="width:30px;height:30px;margin-right: 30px;float:right;"></a></td>
					</tr>
					<tr>
						<td>联&nbsp;&nbsp;系&nbsp;&nbsp;人：${trans.contactPerson!}</td>
					</tr>
					<#if (trans.saleAddress)??>
					<tr>
						<td colspan="2">详细地址:${trans.saleAddress!}</td>
					</tr>
					</#if>
				</tbody>
			</table>
		</div>
	</div>
	<div style="background:#eee;height:40px;"><p style="line-height: 40px;margin-left: 10px;">说明</p></div>
	<div class="bottom">
		<#if trans.coalSalesId??>
		<li>如果对过程有疑问，请点击<a href="${base}/mobile/lmbdrawingquestions.html">《接单拉煤常见问题帮助》</a>了解详细的操作方法好相关信息</li>
		<li>所有的货运信息均为信息部发布，具体货运价格以您和信息部沟通结果为准。</li>
		<li>如果您在使用中有任何疑问，请拨打客服电话<a href="tel:4000912518">400-0912-518</a>。</li>
		<#else>
		<li>此货运信息为个人发布，具体货运价格与您和联系人的沟通结果为准。</li>
		<li>如果您在使用中有任何疑问，请拨打客服电话<a href="tel:4000912518">400-0912-518</a>。</li>
		</#if>
	</div>
	<script src="${base}/assets/js/jquery.min.js"
		type="text/javascript"></script>
	<script	src="${base}/assets/js/bootstrap.min.js"
		type="text/javascript"></script>
	<script>
		var creditRating=${trans.creditRating!3}
		function scoreFun(object, opts) {
        var defaults = {
          fen_d : 16,
          ScoreGrade : 5,
          nameScore : "fenshu",
          parent : "star_score",
          attitude : "attitude"
        };
        options = $.extend({}, defaults, opts);
        var countScore = object.find("." + options.nameScore);
        var startParent = object.find("." + options.parent);
        
        var now_cli;
        var fen_cli;
        var atu;
        var fen_d = options.fen_d;
        var len = options.ScoreGrade;
        startParent.width(fen_d * len);
        var preA = (5 / len);
        for (var i = 0; i < len; i++) {
          var newSpan = $("<a href='javascript:void(0)'></a>");
          newSpan.css({
            "left" : 0,
            "width" : fen_d * (i + 1),
            "z-index" : len - i
          });
          newSpan.appendTo(startParent)
        }
        startParent.find("a").each(function(index, element) {
          show(creditRating, $(this))//展示的星星数
        });
        function show(num, obj) {
          var n = parseInt(num);
          var lefta = num * fen_d;
          var ww = fen_d * n;
          var scor = preA * n;
          object.find("a").removeClass("clibg");
          obj.addClass("clibg");
          obj.css({
            "width" : ww,
            "left" : "0"
          });
          countScore.text(scor);
          
        }
      };
      scoreFun($("#starttwo"),{
           fen_d:17,//每一个a的宽度
           ScoreGrade:5//a的个数 10或者
         })
   
	</script>
</body>
</html>
